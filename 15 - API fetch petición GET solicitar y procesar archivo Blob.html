<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>API fetch AJAX solicitar y procesar archivo Blob</title>
<meta nombre="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">	
<style>
.container {
width: 750px;
}
</style>
<div class="container">
<img src="" class="img-fluid">
</div>
</head>
<body>
<script>
/* En el método .then se pueden especificar tres tipos de formato para la devolución del objeto respuesta: response.text(),response.json() o response.blob() */
//ejemplo de uso de fetch para enviar petición de carga  de un archivo de imagen
   fetch('suaves.jpg')
//si la promesa se cumple
    .then(function(response) {
    //la propiedad Ok indica que todo ha ido bien 
  if (!response.ok) {
        throw new Error('Error, status = ' + response.status);
      }
  //respuesta en formato blob
	  return response.blob();
    })
//si la promesa se cumple
.then(function(obj) {
 let foto = document.querySelector('.img-fluid');
//función para tratar tratar la imagen
//crear la url para la ruta de la foto
 let fotoURL = URL.createObjectURL(obj);
//URL.createObjectURL() sirve para crear una cadena de texto que puede ser utilizada como valor del atributo src de una imagen  
   foto.src = fotoURL;
    })
</script>
</body>
</html>