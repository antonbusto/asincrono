<!DOCTYPE html>
<html lang="es">
<head>
<title>14 - API fetch petición GET y recibir JSON desde array PHP</title>
<meta charset="UTF-8">
<meta nombre="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="contrast.css" rel="stylesheet" type="text/css">
<style>
.container {
width: 750px;
}
</style>
</head>
<body>
<div class="container">
<div id="foto">
</div>
<div id="titular"></div>  
<div id="p1"></div> 
<button type="button"  class="btn btn-primary" onclick="cargarContenido()">Kurt Cobain</button>
</div> 
<script>
/* Función que carga contenido dinámicamente en una aplicación web utilizando una solicitud AJAX y actualiza los elementos HTML con el contenido obtenido */
function cargarContenido() {
  // Realizar una solicitud AJAX al archivo "ajax-array-php.php" con un parámetro aleatorio para evitar la caché
  fetch("ajax-array-php.php?r=" + Math.random())
    .then(response => {
      // Verificar si la respuesta es exitosa
      if (!response.ok) {
        throw new Error('Error en la solicitud');
      }
      // Convertir la respuesta en formato JSON
      return response.json();
    })
    .then(array => {
      // Actualizar el contenido de los elementos HTML con los datos obtenidos del array JSON
      document.getElementById("foto").innerHTML = array[0];
      document.getElementById("titular").innerHTML = array[1];
      document.getElementById("p1").innerHTML = array[2];
    })
    .catch(error => {
      // Capturar y mostrar cualquier error en la consola
      console.error(error);
    });
}

</script>
</body>
</html>