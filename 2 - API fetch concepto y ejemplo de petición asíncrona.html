<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>2-API Fetch concepto y ejemplo de petición asíncrona</title>
<meta nombre="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">	
<style>
.container {
width: 750px;
}
</style>
<div class="container">
<div id="texto"></div>
</div>
</head>
<body>
<script>
/* La API Fetch es una alternativa a AJAX XHR basada en promesas que también permite la comunicación con el servidor en segundo plano. El resultado de fetch es una promesa que se considera siempre resuelta y solo será rechazada si sucede un error de red.  */

/* el único parámetro obligatorio de fetch es la url de destino de la petición, puede ser un archivo txt, json, php o una url absoluta http */  
fetch("lugo.txt") 
//si la promesa devuelta por fetch es aceptada
.then(response=>response.text())
/* el método response.text() devuelve el texto del servidor, y a su vez devuelve un nuevo objeto promesa. Si esta promesa se cumple podremos especificar el trabajo con los datos de la respuesta del servidor */
.then(data=>{
document.getElementById("texto").innerHTML= data;
})
//captura en caso de error en la red
.catch(function (e) {
console.log('error: ' + e);
});
</script>
</body>
</html>